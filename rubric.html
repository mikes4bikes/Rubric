<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Writing Rubric</title>

	<script
	
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous">
	</script>
	<script 
		src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js" 
	  integrity="sha256-vIL0pZJsOKSz76KKVCyLxzkOT00vXs+Qz4fYRVMoDhw="
	  crossorigin="anonymous">
	</script>
	
<style>
	h1, h2, h3 {
		text-align: center;
		font-family: Gotham, "Helvetica Neue", Helvetica, Arial, "sans-serif";
		padding: 0;
		
	}
	
	body {

		text-align: center;
		background-color: #FFFEA4;
	}
	
	#survey-form {
		display: block; 
		text-align: justify;
		margin: auto auto auto auto; 
		width: 80%;
		font-family: Consolas, "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", Monaco, "Courier New", "monospace";
		font-weight: 900;
		line-height: 1; 
	}
	
	label:before {
		 display: inline;
		  content: " ";
		  padding-top: 0px;
		font-family: Consolas, "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", Monaco, "Courier New", "monospace";
		font-size: 22px; 
	}
	
	@media print {
    html, body {
        height: 99%;    
        transform: scale(.99);
    }
}
	
	
</style>
</head>

<body>
	<h2 id="title">Writing Rubric for Introduction to College Writing </h2>
	<form id="survey-form">
		 <label id="name-label"  for="name">Name&nbsp;&nbsp;</label>
  			<input type="text" class="pdfArray" id="name" placeholder="Enter your name" >&nbsp;&nbsp;Today's date:<input class="pdfArray" type="date" id="today"  >
		 Select Class
		  <select name="class-selector" class="pdfArray" id="classSelector">
			  <option value="MW 1:00 pm">MW 1:00 pm</option>
			  <option value="Monday 9 am">Monday 9 am</option>
			  <option value="Wednesday 9 am">Wednesday 9 am</option>
			  <option value="Tuesday Night">Tuesday Night</option>
			  <option value="Thursday Night">Thursday Night</option></option>
			  <option value="MW 2:30 pm">MW 2:30 pm</option>
	      </select>
		<h4>Rubric Prerequisites</h4>
		<h4 >Instructions
		  <select name="complete-instructions" class="pdfArray" id="instruction">
			  <option value="incomplete">incomplete</option>
			  <option value="complete">complete</option>
	      </select><br>
		  <textarea id="instructions-comments" class="pdfArray" rows="1" cols="55" ></textarea>
		  <br>
		  Formatting
		  <select name="complete-formatting" class="pdfArray" id="formatting">
			  <option value="incomplete">incomplete</option>
			  <option value="complete">complete</option>
	      </select><br>
		  <textarea id="formatting-comments" class="pdfArray" rows="1" cols="55" ></textarea>
		  <br>
		  Spelling
		  <select name="complete-spelling" class="pdfArray" id="spelling">
			  <option value="incomplete">incomplete</option>
			  <option value="complete">complete</option>
	      </select><br>
		  <textarea id="spelling-comments" class="pdfArray" rows="1" cols="55" ></textarea>
		  <br>
	  Capitalization
		  <select name="complete-capitalization" class="pdfArray" id="capitalization">
			  <option value="incomplete">incomplete</option>
			  <option value="complete">complete</option>
	      </select><br>
		  <textarea id="capitalization-comments" class="pdfArray" rows="1" cols="55" ></textarea>
		  <br>
		  Plagiarism
		  <select name="complete-plagiarism" class="pdfArray" id="plagiarism">
			  <option value="incomplete">incomplete</option>
			  <option value="complete">complete</option>
	      </select><br>
		  <textarea id="plagiarism-comments" class="pdfArray" rows="1" cols="55" ></textarea><br>
		  Grade for Evidence and Support<br>
		  <select onChange="calcScore()" class="pdfArray" name="evidence-grade" id="evGrade">
			  <option value="5">5</option>
			  <option value="4">4</option>
			  <option value="3">3</option>
			  <option value="2">2</option>
			  <option value="1">1</option>
			  <option selected  value="0">0</option>
	  </select>
		  <br>
			<textarea id="evidence-support-comments" class="pdfArray" rows="1" cols="55" ></textarea>
		  	<br>
	  	  Grade for Logic and Coherence<br>
		  <select onChange="calcScore()" class="pdfArray" name="logic-grade" id="logGrade">
			  <option value="5">5</option>
			  <option value="4">4</option>
			  <option value="3">3</option>
			  <option value="2">2</option>
			  <option value="1">1</option>
			  <option selected  value="0">0</option>
	  </select>
          <br>
          <textarea id="logic-coherence-comments" class="pdfArray" rows="1" cols="55" ></textarea>
			<br>
		  Grade for Organization and Focus<br>
		  <select onChange="calcScore()" class="pdfArray" name="organization-grade" id="orgGrade">
			  <option value="5">5</option>
			  <option value="4">4</option>
			  <option value="3">3</option>
			  <option value="2">2</option>
			  <option value="1">1</option>
			  <option selected value="0">0</option>
	  </select>
		  <br>
			<textarea id="organization-focus-comments" class="pdfArray" rows="1" cols="55" ></textarea>
			<br>
		  Grade for Grammar, Punctuation, and Usage<br>
		  <select onChange="calcScore()" class="pdfArray" name="grammar-grade" id="gramGrade">
			  <option value="5">5</option>
			  <option value="4">4</option>
			  <option value="3">3</option>
			  <option value="2">2</option>
			  <option value="1">1</option>
			  <option value="0" selected>0</option>
	      </select>
		  <br>
			<textarea id="grammar-punctuation-usage-comments" class="pdfArray" rows="1" cols="55" ></textarea>
			<br>
		  Final grade =	<label name="final-score" class="pageArray" id="finalScore">0</label>
		<button id="button">Print</button>
	</form>
	<script type="text/javascript">
	
		$('textarea').on('paste input', function () {
		    if ($(this).outerHeight() > this.scrollHeight){
		        $(this).height(1)
		    }
		    while ($(this).outerHeight() < this.scrollHeight + parseFloat($(this).css("borderTopWidth")) + parseFloat($(this).css("borderBottomWidth"))){
		        $(this).height($(this).height() + 1)
		    }
		});
		document.querySelector("#today").valueAsDate = new Date();
		
		function calcScore(){
			let total = 0; 
			let finalGrade = 0; 
			let points = 0; 
			let  a = document.getElementById("evGrade");
			let  eG = Number(a.options[a.selectedIndex].value);
			let  b = document.getElementById("logGrade");
			let  lG = Number(b.options[b.selectedIndex].value);
			let  c = document.getElementById("orgGrade");
			let  oG = Number(c.options[c.selectedIndex].value);
			let  d = document.getElementById("gramGrade");
			let  gG = Number(d.options[d.selectedIndex].value);
			points = (eG + lG + oG + gG);
			total = (eG + lG + oG + gG) / 4; 
			finalGrade = (total / 5) * 100 + "%"; 
			console.log(finalGrade);
			console.log(total); 
			console.log(points);
			document.getElementById('finalScore').innerHTML = finalGrade; 
		}
	
		
	
	</script>
	<script>
		// init the jsPDF library
		const pdf = new jsPDF();
		pdf.setFontSize(10);
		pdf.setFont("Georgia", "bold");
		
		// add 'click' event listener for the button
		button.addEventListener('click', printPDF)
		// actual PDF options
		function printPDF() {
			let pageArray = [];
			pageArray.push(document.getElementById('name').value);
			pageArray.push(document.getElementById('today').value);
			pageArray.push(document.getElementById('classSelector').value);
			pageArray.push("");
			pageArray.push('Instructions');
			pageArray.push(document.getElementById('instruction').value);
			pageArray.push(document.getElementById('instructions-comments').value);
			pageArray.push("");
			pageArray.push('Formatting');
			pageArray.push(document.getElementById('formatting').value);
			pageArray.push(document.getElementById('formatting-comments').value);
			pageArray.push("");
			pageArray.push('Spelling');
			pageArray.push(document.getElementById('spelling').value);
			pageArray.push(document.getElementById('spelling-comments').value);
			pageArray.push("");
			pageArray.push('Capitalization');
			pageArray.push(document.getElementById('capitalization').value);
			pageArray.push(document.getElementById('capitalization-comments').value);
			pageArray.push("");
			pageArray.push('Plagiarism');
			pageArray.push(document.getElementById('plagiarism').value);
			pageArray.push(document.getElementById('plagiarism-comments').value);
			pageArray.push("");
			pageArray.push('Evidence and Support');
			pageArray.push(document.getElementById('evGrade').value);
			pageArray.push(document.getElementById('evidence-support-comments').value);
			pageArray.push("");
			pageArray.push('Logic and Coherence');
			pageArray.push(document.getElementById('logGrade').value);
			pageArray.push(document.getElementById('logic-coherence-comments').value);
			pageArray.push("");
			pageArray.push('Organization and Focus');
			pageArray.push(document.getElementById('orgGrade').value);
			pageArray.push(document.getElementById('organization-focus-comments').value);
			pageArray.push("");
			pageArray.push('Grammar, Punctuation, and Usage');
			pageArray.push(document.getElementById('gramGrade').value);
			pageArray.push(document.getElementById('grammar-punctuation-usage-comments').value);
			pageArray.push("");
			pageArray.push("Final Score = " + document.getElementById('finalScore').innerHTML);

	
			
			
			//		// @param 2 - Coordinate (in units declared at inception of PDF document) against upper edge of the page
			// @param 3 - String or array of strings to be added to the page. Each line is shifted one line down per font, spacing settings declared before this call.
			pdf.text(20, 20, pageArray);
			// save the PDF document (downloadable)
			pdf.save(pageArray[0] + '_Rubric');
		}
	</script>
</body>
</html>
